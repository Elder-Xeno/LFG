{% extends 'base.html' %}

{% block content %}
<div class="profile-header">
    <div class="profile-image-container">
        {% if user_profile.profile_image %}
            <img class="profile-image" src="{{ user_profile.profile_image.url }}" alt="Profile Image">
        {% else %}
        <img class="default-profile-image" src="../../../static/css/imgs/default-pic.JPG" alt="Default Profile Image">
        {% endif %}
    </div>
    <h1>{{ user_profile.user.username }}</h1>
    {% if user_profile == request.user.profile %}
        <a href="{% url 'edit_profile' %}">Edit Profile</a>
    {% endif %}
</div>

{% if edit_mode %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="id_profile_image">Upload Profile Picture:</label>
        <input type="file" name="profile_image" id="id_profile_image">
        <button type="submit">Upload</button>
    </form>

    <h2>Platforms:</h2>
    {% for platform in user_profile.platforms.all %}
        <p>{{ platform.name }}</p>
        <a href="{% url 'dissociate_platform' platform.id %}">Remove</a>
    {% endfor %}

    <h2>Games Collection ({{ games_owned.count }}):</h2>
    {% for game in games_owned %}
        <div class="card">
            <div class="card-body">
                <h6><a href="{{ game.url }}" target="_blank">{{ game.name }}</a></h6>
                <a href="{% url 'dissociate_game' game.id %}">Remove</a>
            </div>
        </div>
    {% endfor %}
{% else %}
    <h2>Platforms:</h2>
    {% for platform in user_profile.platforms.all %}
        <p>{{ platform.name }}</p>
    {% endfor %}

    <h2>Games Collection ({{ games_owned.count }}):</h2>
    <div class="card-container">
    {% for game in games_owned %}
        <div class="card">
            <div class="card-body">
                <h6><a href="{{ game.url }}" target="_blank">{{ game.name }}</a></h6>
            </div>
        </div>
    {% endfor %}
    </div>
{% endif %}
{% endblock %}
